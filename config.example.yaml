camera:
  serial: null
  exposure_us: 8000
  gain: 0
  pixel_format: "Mono8"

plc:
  protocol: "ASCII_TCP"
  ip: "192.168.0.10"
  port: 8501
  addr:
    busy: "R1000"
    done: "R1001"
    error: "R1002"
    ready: "R1003"
    trigger: "M200"
    ack: "M201"
    result_bits_start_word: "R1100"
  log_raw_response: false
  trigger_poll_interval_ms: 50
  timeouts:
    connect_ms: 3000
    cycle_ms: 5000

models:
  anomaly:
    path: "models/anomaly.onnx"
    provider: "cuda"
    threshold: 0.15
    input_size: 256
  yolo:
    enabled: false
    path: "models/yolo.engine"
    conf_thres: 0.25
    iou_thres: 0.45

io:
  save_images: true
  output_dir: "runs/latest"
  raw_dir: "runs/raw"
  crops_dir: "runs/crops"
  filename_pattern: "{ts}_{model}_{idx:02d}_{cls}.png"
  save_crops: false

layout:
  count: 28
  order: "row_major"
  rows: 4
  cols: 7
  patch_padding: 10
  circle_min_radius: 300
  circle_max_radius: 340
  circle_radius_expand: 16
  circle_erode_iter: 0
  circle_dilate_iter: 0
  circle_blur_kernel: 5
  circle_threshold: 50
  circle_use_otsu: false
  circle_invert: false
  ws_scale: 0.5
  ws_dist_ratio: 0.4
  ws_open_ksize: 3
  ws_open_iter: 1
  ws_bg_dilate_iter: 2
  ws_dist_mask_size: 5
  ws_min_area_px: 2000
  ws_max_contour_pts: 800
